<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Sürpriz 💖</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    body {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #ffd6e8, #ffeaf2);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .container {
      width: 90%;
      max-width: 360px; /* iPhone 13 genişliğine göre */
      text-align: center;
    }

    .question {
      font-size: 1.2rem; /* responsive boyut */
      margin-bottom: 1.5rem;
      font-weight: 600;
      color: #ff4d88;
      word-wrap: break-word;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    button {
      padding: 0.8rem;
      font-size: 1rem;
      border: none;
      border-radius: 12px;
      background: #ff99cc;
      color: white;
      font-weight: bold;
      transition: transform 0.3s ease, background 0.3s ease;
      cursor: pointer;
    }

    button:hover {
      background: #ff4d88;
      transform: scale(1.05);
    }

    .final-text {
      font-size: 1.4rem;
      color: #d6336c;
      font-weight: bold;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1000;
    }

    @keyframes pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }

    .big {
      animation: pop 0.4s ease;
      transform: scale(1.3);
      z-index: 999; /* Hep üstte olsun */
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="question-container"></div>
    <div id="options-container" class="options"></div>
  </div>

  <canvas class="confetti" id="confettiCanvas"></canvas>

  <script>
    const questions = [
      {
        text: "Bugün kendinizi nasıl hissediyorsunuz eloş hanım?",
        options: ["Çok iyi 😍", "İyi 🙂", "Kötü 😢"]
      },
      {
        text: "Bu yıl akademik olarak başarılı olacağını düşünüyor musun?",
        options: ["Evet 💪", "Hayır 😴"]
      },
      {
        text: "Sence yıllar sonra evlenir miyiz?",
        options: ["Evet 💍", "Hayır 🤔"]
      },
      {
        text: "Sence ben gerçekten seni seviyor muyum?",
        options: ["Evet ❤️", "Hayır 🙄"]
      }
    ];

    let currentQuestion = 0;
    let hayirClickCount = 0;

    const questionContainer = document.getElementById("question-container");
    const optionsContainer = document.getElementById("options-container");

    function showQuestion() {
      const q = questions[currentQuestion];
      questionContainer.innerHTML = `<div class="question">${q.text}</div>`;
      optionsContainer.innerHTML = "";
      q.options.forEach(option => {
        const btn = document.createElement("button");
        btn.textContent = option;
        btn.onclick = () => handleAnswer(option);
        optionsContainer.appendChild(btn);
      });
    }

    function handleAnswer(answer) {
      if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        showQuestion();
      } else {
        showFinal();
      }
    }

    function showFinal() {
      questionContainer.innerHTML = "";
      optionsContainer.innerHTML = "";

      const texts = ["Neyse ela...", "Uzun lafın kısası...", "💖 SEVGİLİM OLUR MUSUNN? 💖"];
      let i = 0;

      function showNextText() {
        if (i < texts.length) {
          const textElem = document.createElement("div");
          textElem.className = "final-text";
          textElem.style.animationDelay = `${i * 0.5}s`;
          textElem.textContent = texts[i];
          questionContainer.appendChild(textElem);
          i++;
          setTimeout(showNextText, 500);
        } else {
          showFinalOptions();
        }
      }
      showNextText();
    }

    function showFinalOptions() {
      optionsContainer.innerHTML = "";
      const yesBtn = document.createElement("button");
      yesBtn.textContent = "Evet 💍";
      yesBtn.onclick = () => celebrate();

      const noBtn = document.createElement("button");
      noBtn.textContent = "Hayır 🙃";
      noBtn.onclick = () => {
        hayirClickCount++;
        yesBtn.classList.add("big");

        setTimeout(() => yesBtn.classList.remove("big"), 400);

        if (hayirClickCount >= 2) {
          noBtn.remove();
          yesBtn.style.margin = "0 auto";
          yesBtn.style.display = "block";
        }
      };

      optionsContainer.appendChild(yesBtn);
      optionsContainer.appendChild(noBtn);
    }

    function celebrate() {
      questionContainer.innerHTML = `<div class="final-text">🎉 Seni Seviyorum! 🎉</div>`;
      optionsContainer.innerHTML = "";

      const canvas = document.getElementById("confettiCanvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const confetti = [];
      for (let i = 0; i < 150; i++) {
        confetti.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height - canvas.height,
          r: Math.random() * 6 + 4,
          d: Math.random() * 50,
          color: `hsl(${Math.random() * 360},100%,50%)`,
          tilt: Math.random() * 10 - 10
        });
      }

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        confetti.forEach(c => {
          ctx.beginPath();
          ctx.fillStyle = c.color;
          ctx.arc(c.x, c.y, c.r, 0, Math.PI * 2, true);
          ctx.fill();
        });
        update();
      }

      function update() {
        confetti.forEach(c => {
          c.y += Math.cos(c.d) + 2 + c.r / 2;
          c.x += Math.sin(c.d);
          if (c.y > canvas.height) {
            c.y = -10;
            c.x = Math.random() * canvas.width;
          }
        });
      }

      setInterval(draw, 20);
    }

    showQuestion();
  </script>
</body>
</html>
